# FAQ

### How does koi work?
To parse arguments, koi first builds up _argument lists_ with each `__addarg`, `__addgroup`, and `__adddep` call. These lists hold information about the arguments registered for each function (whether it be a subcommand or a `__koimain`). When it comes time to parse arguments with `__parseargs`, koi refers to the built argument lists to determine how to parse each argument.

### What is koi written in?
Koi is written entirely in Bash.

### What was the motivation for writing koi?
Koi is largely inspired from [Python's argparse](https://docs.python.org/3/library/argparse.html). In addition, koi was born from the desire to create a reusable library for parsing arguments in Bash scripts, as many scripts need this functionality and recreate it themselves.

### Why not just use `getopt` or `getopts`?
Bash ships with a POSIX-compliant argument parser (`getopts`). There are also external utilities (e.g. `getopt`) for parsing arguments. Both of these tools can parse a subset of the complex command line arguments that koi can. In addition, koi improves the readability of code that parses arguments (this is one of the main draws of koi). When using `getopts`, the programmer must define what happens when each argument is present, set up their own argument verification and validation, and define and maintain help and usage documentation. Koi aims to streamline the argument parsing process by abstracting away the repeatable parts of argument parsing and exposing an easy-to-use interface. Need an example of how hard-to-read complex argument parsing can be with `getopts`? See [this blog post](http://abhipandey.com/2016/03/getopt-vs-getopts/).

### Why do some functions need to start with two underscores?
When koi uses subcommands, it uses the functions defined in the script as available subcommands. In order for koi to treat a function as internal and not display it as an available CLI subcommand, koi ignores functions that begin with an underscore (`_`) or a dash (`-`). Thus, if you are using subcommands, you can define a function whose name begins with two underscores and koi will treat it as internal.

### Why can't I nest functions that parse arguments?
When koi parses arguments, it builds a list of registered arguments and actual arguments in the global scope. When two functions try to parse arguments in the same scope, they both write to the list of registered arguments, which makes parsing arguments ambiguous. It is possible to get around this by using the [`__cleararglists` function](/helpers?id=__cleararglists) in a subshell (as is done in the [`help` function](/subcommands?id=help)), but doing so is not advised in most cases.

### Are there any illegal names for registered options?
Yes, there are few names that cannot be used as the long option when registering arguments, due to the fact that they would overwrite internal variables. The following cannot be used as long options: `--BASH` `--BASH_ENV` `--BASH_SUBSHELL` `--BASHPID` `--BASH_VERSINFO` `--BASH_VERSION` `--CDPATH` `--DIRSTACK` `--EDITOR` `--EUID` `--FUNCNAME` `--GLOBIGNORE` `--GROUPS` `--HOME` `--HOSTNAME` `--HOSTTYPE` `--IFS` `--IGNOREEOF` `--LC_COLLATE` `--LC_CTYPE` `--LINENO` `--MACHTYPE` `--OLDPWD` `--OSTYPE` `--PATH` `--PIPESTATUS` `--PPID` `--PROMPT_COMMAND` `--PS1` `--PS2` `--PS3` `--PS4` `--PWD` `--REPLY` `--SECONDS` `--SHELLOPTS` `--SHLVL` `--TMOUT` `--UID` `--koiname` `--koidescription` `--koihelpmenuprefix` `--koiwordwraplength` `--koishowhints` `--koicolorprimary` `--koicolorsecondary` `--koirequirehelpactions`.

### Can koi parse joint options?
Yes, koi can parse joint options. For more information about parsing joint arguments, please see [parsing joint arguments](/parsing_arguments?id=parsing-joint-arguments).

### Can koi parse mutually exclusive groups?
Yes, koi can parse mutually exclusive groups. For more information, see [argument groups](/argument_groups).

### Can arguments registered with koi depend on each other?
Yes, koi can parse dependent arguments. For more information, see [dependent arguments](/dependent_arguments).

### What are hints?
Hints are helpful command suggestions that are printed in autogenerated help menus. By default they are printed at the bottom of regular help menus and omitted in verbose help menus. They can be turned off via koi configurations (see [Configuration](/configuration)).

### What is a _usage error_ <span>&nbsp;</span>vs. a _syntax error_?
A usage error comes from incorrect command line usage. This means that arguments are properly defined via koi, but the user of the script which sources koi did not pass in the correct command line arguments per those that were defined. To resolve a usage error, provide a valid set of command line arguments per those that are defined.

A syntax error comes from incorrect koi usage. These can result from the incorrect usage of `__addarg`, `__addgroup`, etc.

When errors are printed to the command line, _syntax errors_ are printed in red and contain the name of the error's source function (e.g. `__addarg`), while _usage errors_ are printed in the default terminal color and do not contain the name of the error's source function. The only exception to this rule is when a script using subcommands is run with an invalid subcommand (i.e., the error's source function is `__koirun`). In this case, usage errors are printed in red.

### Can I contribute to koi?
Yes, koi is under active development and welcomes contributions. For more information on how to get started, check out [Contributing](/development?id=contributing).

### Are more features planned for koi?
Koi is under active development, which ranges from adding new functionality to patching bugs. An up-to-date set of future/proposed features can be found via [koi's GitHub issues](https://github.com/wcarhart/koi/issues).

### Are there any drawbacks to using koi?
When using koi, there are a few gotchas to look out for. For more information, see [Caveats](/caveats).

### What versions of Bash does koi work with?
Koi supports Bash 3.2.57 and later. It is written in a way to not use Bash 4.x+ specific features (such as associative arrays) because the majority of macOS machines still use Bash 3.2 as the default version. If you're interested in learning more about why Apple is ~14 years behind in Bash updates, check out this [Reddit post](https://www.reddit.com/r/apple/comments/7v97ls/why_doesnt_apple_use_any_gpl_v3_unix_packages_in/), this [Hacker News thread](https://news.ycombinator.com/item?id=20102597), or this [Stack Overflow answer](https://apple.stackexchange.com/questions/208312/why-does-apple-ship-bash-3-2).

### Why is it called koi?
The original working name of the library was _Bashful Arg Parser_, which is a mouthful. This was shortened to _Bashful_, to which _coy_ is a synonym. _koi_ is a homophone of _coy_ and thus was chosen as the name.

<hr>
<div style="text-align:center">
	<a class="edit-link" href="https://github.com/wcarhart/docs/blob/master/docs/koi/faq.md" target="_blank"><i class="fas fa-edit"></i> Edit this page</a>
</div>